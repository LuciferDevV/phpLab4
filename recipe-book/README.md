# README

## Инструкция по запуску проекта

### Установка

1. Убедитесь, что у вас установлен PHP. Вы можете проверить это с помощью команды:
   ```bash
   php -v
   ```

2. Для запуска локального сервера перейдите в корневую директорию проекта `recipe-book` и выполните команду:
   ```bash
   php -S localhost:5051
   ```

3. Откройте в браузере URL:
   ```bash
   http://localhost:5051/
   ```

Теперь вы сможете использовать проект "Книга рецептов".

---

## Описание лабораторной работы

Целью лабораторной работы является создание простого веб-приложения для добавления, отображения и хранения рецептов. В процессе работы было освоено использование HTML-форм, обработка данных с помощью PHP, валидация и фильтрация введённых данных, а также сохранение данных в текстовом файле с использованием формата JSON.

Приложение состоит из нескольких частей:
- **Главная страница** (index.php) — отображает последние два рецепта.
- **Страница создания рецепта** (create.php) — форма для добавления нового рецепта.
- **Страница со списком всех рецептов** (list.php) — выводит все рецепты из файла.

Данные рецептов сохраняются в файл `storage/recipes.txt` в формате JSON, и при каждом добавлении нового рецепта файл обновляется.

---

## Краткая документация к проекту

### Структура проекта

```
recipe-book/
├── public/                          
│   ├── index.php                    # Главная страница (вывод последних рецептов)
│   └── recipe/                      
│       ├── create.php               # Форма добавления рецепта
│       └── list.php                 # Страница с отображением рецептов
├── src/                             
│   ├── core.php                     # Логика обработки данных
│   ├── helpers.php                  # Вспомогательные функции для обработки данных
├── storage/                         
│   └── recipes.txt                  # Файл для хранения рецептов
└── README.md                        # Описание проекта
```

### Основные компоненты

- **index.php**: Главная страница, где отображаются последние два рецепта.
  
  Пример:
  ```php
  <?php
  $recipes = getAllRecipes();
  $latest = array_slice(array_reverse($recipes), 0, 2);
  ```

- **create.php**: Страница с формой для добавления нового рецепта.
  
  Пример:
  ```php
  <form method="POST">
      <label>Название: <input type="text" name="title" required></label><br><br>
      <button type="submit">Сохранить</button>
  </form>
  ```

- **list.php**: Страница с полным списком рецептов.

  Пример:
  ```php
  $recipes = getAllRecipes();
  foreach ($recipes as $recipe) {
      echo "<li>" . htmlspecialchars($recipe['title']) . "</li>";
  }
  ```

- **core.php**: Основной файл, который обрабатывает данные формы и сохраняет их в файл.

  Пример:
  ```php
  function handleRecipeSubmission(array $data) {
      // Валидация и фильтрация данных
      $title = sanitizeInput($data['title']);
      // Сохранение данных
      saveToFile(DATA_FILE, $recipe);
  }
  ```

- **helpers.php**: Вспомогательные функции для очистки данных, проверки обязательных полей и сохранения данных.

  Пример:
  ```php
  function sanitizeInput($data) {
      return htmlspecialchars(trim($data)); 
  }
  ```

---

## Примеры использования проекта

1. **Главная страница** (index.php):
   При открытии главной страницы отображаются два последних рецепта, если они есть. Если рецептов нет, появляется сообщение "Пока рецептов нет."

2. **Форма добавления рецепта** (create.php):
   Форма позволяет добавить новый рецепт с обязательными полями: название, категория, описание, ингредиенты, шаги. При успешном добавлении рецепта данные сохраняются в файл.

3. **Список всех рецептов** (list.php):
   На странице отображаются все рецепты, сохранённые в `storage/recipes.txt`.

---

## Ответы на контрольные вопросы

1. **Какие методы HTTP применяются для отправки данных формы?**

   Для отправки данных формы используется метод `POST`. Этот метод позволяет отправлять данные формы на сервер, не отображая их в URL.

2. **Что такое валидация данных, и чем она отличается от фильтрации?**

   - **Валидация** — это процесс проверки данных на соответствие определённым правилам (например, проверка, что поле не пустое, что введённый email является корректным).
   - **Фильтрация** — это процесс удаления нежелательных символов или изменений в данных, чтобы обеспечить их безопасность (например, удаление лишних пробелов или экранирование HTML-символов).

3. **Какие функции PHP используются для фильтрации данных?**

   - `trim()` — удаляет пробелы и другие символы с начала и конца строки.
   - `htmlspecialchars()` — экранирует специальные символы HTML, чтобы предотвратить выполнение нежелательных скриптов.
   - `filter_var()` — используется для фильтрации данных по заданным фильтрам (например, для проверки email-адреса).

---

## Список использованных источников

- [PHP Documentation](https://www.php.net/docs.php) — Официальная документация PHP.
- [HTML Forms](https://developer.mozilla.org/en-US/docs/Learn/Forms) — MDN Web Docs о формах.
- [JSON in PHP](https://www.php.net/manual/en/book.json.php) — Работа с JSON в PHP.

---